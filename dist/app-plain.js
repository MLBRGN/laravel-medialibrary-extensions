document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-carousel]").forEach(o=>{const n=o.querySelectorAll(".carousel-item"),u=o.querySelectorAll(".carousel-indicators button"),b=o.querySelector('[data-slide="prev"]'),p=o.querySelector('[data-slide="next"]'),f=o.getAttribute("data-carousel-ride")==="true",L=Number(o.getAttribute("data-carousel-ride-interval")??"5000"),h=o.getAttribute("data-carousel-ride-only-after-interaction")==="true";let d=0,v=!1,e=null,t=0,r=0,g=0,i=0;const s=50,m=(a,l="right")=>{n.forEach((k,q)=>{k.classList.remove("active","slide-left","slide-right"),k.style.zIndex=0});const S=n[d],E=n[a];l==="right"?(S.classList.add("slide-left"),E.classList.add("slide-right")):(S.classList.add("slide-right"),E.classList.add("slide-left")),E.offsetWidth,S.classList.remove("active"),E.classList.add("active"),u.forEach((k,q)=>k.classList.toggle("active",q===a)),d=a;const T=new CustomEvent("carouselSlided",{bubbles:!0,detail:{carousel:o}});o.dispatchEvent(T)},c=a=>{if(a===d)return;const l=(a+n.length)%n.length,E=(l-d+n.length)%n.length>n.length/2?"left":"right";m(l,E)},I=()=>{const l=r-t;Math.abs(l)>40&&(l<0?c((d+1)%n.length):c((d-1+n.length)%n.length),y())},A=()=>{w(),e=setInterval(()=>{c((d+1)%n.length)},L)},w=()=>{e!==null&&(clearInterval(e),e=null)},y=()=>{v||(v=!0,f&&h&&A()),f&&!h&&A()};u.forEach((a,l)=>{a.addEventListener("click",()=>{c(l),y()})}),b==null||b.addEventListener("click",()=>{c((d-1+n.length)%n.length),y()}),p==null||p.addEventListener("click",()=>{c((d+1)%n.length),y()}),o.addEventListener("mouseenter",w),o.addEventListener("mouseleave",()=>{f&&(!h||v)&&A()}),o.addEventListener("focusin",w),o.addEventListener("focusout",()=>{f&&(!h||v)&&A()}),o.addEventListener("keydown",a=>{a.key==="ArrowLeft"?(c((d-1+n.length)%n.length),y()):a.key==="ArrowRight"&&(c((d+1)%n.length),y())}),o.addEventListener("touchstart",a=>{t=a.changedTouches[0].screenX,g=a.changedTouches[0].screenY},{passive:!0}),o.addEventListener("touchend",a=>{r=a.changedTouches[0].screenX,i=a.changedTouches[0].screenY,Math.abs(i-g)<s&&I()},{passive:!0}),n.length>1&&f&&!h&&A()})});document.addEventListener("DOMContentLoaded",()=>{const o=document.querySelectorAll(".media-modal"),n='a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])',u={},b=e=>{const t=e.querySelectorAll(n);if(t.length===0)return;const r=t[0],g=t[t.length-1],i=s=>{s.key==="Tab"&&(s.shiftKey?document.activeElement===r&&(s.preventDefault(),g.focus()):document.activeElement===g&&(s.preventDefault(),r.focus()))};e.addEventListener("keydown",i),e._trapFocusHandler=i,r.focus()},p=e=>{e._trapFocusHandler&&(e.removeEventListener("keydown",e._trapFocusHandler),delete e._trapFocusHandler)},f=e=>{console.log("openModal",e);const t=document.getElementById(e);if(!t){console.log("modal not found",e);return}t.classList.add("active"),t.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",b(t)},L=e=>{e.classList.remove("active"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="",p(e);const t=new CustomEvent("modalClosed",{bubbles:!0,detail:{modal:e}});e.dispatchEvent(t)};document.querySelectorAll("[data-modal-close]").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".media-modal");t&&L(t)})}),document.querySelectorAll(".media-modal").forEach(e=>{e.addEventListener("click",t=>{t.target===e&&L(e)})}),document.querySelectorAll("[data-modal-trigger]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-modal-trigger");f(t)})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&document.querySelectorAll(".media-modal.active").forEach(t=>{L(t)})}),o.forEach(e=>{const t=e.querySelector("[data-carousel]");let r=e.hasAttribute("data-video-autoplay");function g(i){const s=i.getAttribute("data-youtube-video-id"),m=i.querySelector("lite-youtube").shadowRoot.querySelector("iframe");u[s]=new YT.Player(m,{events:{onReady:()=>{r&&v(s)}}})}e.addEventListener("liteYoutubeIframeLoaded",i=>{const s=i.target.closest("[data-youtube-video-id]");s&&g(s)}),e.addEventListener("modalClosed",()=>{h()}),t.addEventListener("carouselSlided",i=>{if(d(),e.hasAttribute("data-video-autoplay")){console.log(i);const s=i.target.querySelector(".media-video-wrapper");if(s&&s.hasAttribute("data-youtube-video-id")){let m=s.getAttribute("data-youtube-video-id");v(m)}}})});function h(){Object.values(u).forEach(e=>{e.stopVideo()})}function d(){console.log("pauseAllVideoPlayBack"),Object.values(u).forEach(e=>{e.pauseVideo()})}function v(e){console.log("startAllVideoPlayBack");let t=u[e];t&&t.playVideo()}});

function q(t,n){const d=new CustomEvent(t,{bubbles:!0,detail:{element:n}});n.dispatchEvent(d)}function B(t){const d=t.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])');if(d.length===0)return;const c=d[0],g=d[d.length-1],h=v=>{v.key==="Tab"&&(v.shiftKey?document.activeElement===c&&(v.preventDefault(),g.focus()):document.activeElement===g&&(v.preventDefault(),c.focus()))};t.addEventListener("keydown",h),t._trapFocusHandler=h,c.focus()}function O(t){t._trapFocusHandler&&(t.removeEventListener("keydown",t._trapFocusHandler),delete t._trapFocusHandler)}const w=new Map;function P(t){return console.log("carousels.get carousels",w),w.get(t)}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-carousel]").forEach(t=>{const n=t.querySelectorAll(".media-carousel-item"),d=t.querySelectorAll(".media-carousel-indicators button"),c=t.querySelector('[data-slide="prev"]'),g=t.querySelector('[data-slide="next"]'),h=t.getAttribute("data-carousel-ride")==="true",v=Number(t.getAttribute("data-carousel-ride-interval")??"5000"),e=t.getAttribute("data-carousel-ride-only-after-interaction")==="true";let o=0,r=!1,i=null,s=0,l=0,y=0,k=0;const T=50,C=(a,f="right",L=!1)=>{n.forEach(S=>{S.classList.remove("active","slide-in-from-left","slide-in-from-right","slide-out-to-left","slide-out-to-right"),S.style.zIndex=0});const A=n[o],m=n[a];t.getAttribute("data-carousel-effect")==="slide"&&!L&&(f==="right"?(m.classList.add("slide-in-from-right"),A.classList.add("slide-out-to-left")):(m.classList.add("slide-in-from-left"),A.classList.add("slide-out-to-right")),m.offsetWidth),A.classList.remove("active"),m.classList.add("active"),d.forEach((S,M)=>S.classList.toggle("active",M===a)),o=a,q("carouselSlided",t)},u=(a,f=!1)=>{if(a===o)return;console.log("go to slide",a);const L=(a+n.length)%n.length,m=(L-o+n.length)%n.length>n.length/2?"left":"right";C(L,m,f)},V=()=>{const f=l-s;Math.abs(f)>40&&Math.abs(f)>Math.abs(k-y)&&(f<0?u((o+1)%n.length):u((o-1+n.length)%n.length),E())},b=()=>{p(),i=setInterval(()=>{u((o+1)%n.length)},v)},p=()=>{i!==null&&(clearInterval(i),i=null)},E=()=>{r||(r=!0,h&&e&&b()),h&&!e&&b()};d.forEach((a,f)=>{a.addEventListener("click",()=>{u(f),E()})}),c==null||c.addEventListener("click",()=>{u((o-1+n.length)%n.length),E()}),g==null||g.addEventListener("click",()=>{u((o+1)%n.length),E()}),t.addEventListener("mouseenter",p),t.addEventListener("mouseleave",()=>{h&&(!e||r)&&b()}),t.addEventListener("focusin",p),t.addEventListener("focusout",()=>{h&&(!e||r)&&b()}),t.addEventListener("keydown",a=>{a.key==="ArrowLeft"?(u((o-1+n.length)%n.length),E()):a.key==="ArrowRight"&&(u((o+1)%n.length),E())}),t.addEventListener("touchstart",a=>{s=a.changedTouches[0].screenX,y=a.changedTouches[0].screenY},{passive:!0}),t.addEventListener("touchend",a=>{l=a.changedTouches[0].screenX,k=a.changedTouches[0].screenY,Math.abs(k-y)<T&&V()},{passive:!0}),n.length>1&&h&&!e&&b();const I={goToSlide:(a,f=!1)=>u(a,f),getCurrentIndex:()=>o,next:()=>u((o+1)%n.length),prev:()=>u((o-1+n.length)%n.length),pause:p,resume:b};w.set(t,I),t._carouselController=I})});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll(".media-modal"),n={},d=(e,o)=>{const r=document.getElementById(e);if(!r){console.log("modal not found",e);return}r.classList.add("active"),r.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",B(r);const i=r.querySelector("[data-carousel]"),s=P(i);console.log("carousel",i,s),s&&o!==void 0&&o!==null&&s.goToSlide(parseInt(o),!0),q("modalOpened",r)},c=e=>{e.classList.remove("active"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="",O(e),q("modalClosed",e)};document.querySelectorAll("[data-modal-close]").forEach(e=>{e.addEventListener("click",()=>{const o=e.closest(".media-modal");o&&c(o)})}),document.querySelectorAll(".media-modal").forEach(e=>{e.addEventListener("click",o=>{o.target===e&&c(e)})}),document.querySelectorAll("[data-modal-trigger]").forEach(e=>{e.addEventListener("click",o=>{const i=o.target.closest(".media-carousel-item-container").dataset.slideTo,s=e.getAttribute("data-modal-trigger");d(s,i)})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&document.querySelectorAll(".media-modal.active").forEach(o=>{c(o)})}),t.forEach(e=>{const o=e.querySelector("[data-carousel]");e.hasAttribute("data-video-autoplay");function r(i){const s=i.getAttribute("data-youtube-video-id"),l=i.querySelector("lite-youtube").shadowRoot.querySelector("iframe");n[s]=new YT.Player(l,{events:{onReady:()=>{}}})}e.addEventListener("liteYoutubeIframeLoaded",i=>{const s=i.target.closest("[data-youtube-video-id]");s&&r(s)}),e.addEventListener("modalOpened",i=>{if(!e.hasAttribute("data-video-autoplay"))return;const s=e.querySelector(".media-carousel-item.active");if(!s)return;const l=s.querySelector(".media-video-container");if(!l||!l.hasAttribute("data-youtube-video-id"))return;const y=l.getAttribute("data-youtube-video-id");v(y)}),e.addEventListener("modalClosed",()=>{g()}),o.addEventListener("carouselSlided",i=>{if(h(),e.hasAttribute("data-video-autoplay")){const s=o.querySelector(".media-carousel-item.active");if(!s)return;const l=s.querySelector(".media-video-container");if(l&&l.hasAttribute("data-youtube-video-id")){const y=l.getAttribute("data-youtube-video-id");v(y)}}})});function g(){console.log("stopAllVideoPlayBack"),Object.values(n).forEach(e=>{e.stopVideo()})}function h(){console.log("pauseAllVideoPlayBack"),Object.values(n).forEach(e=>{e.pauseVideo()})}function v(e){console.log("startVideoPlayBack");let o=n[e];o&&o.playVideo()}});

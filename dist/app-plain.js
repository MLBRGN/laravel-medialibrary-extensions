document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-carousel]").forEach(s=>{const t=s.querySelectorAll(".carousel-item"),E=s.querySelectorAll(".carousel-indicators button"),a=s.querySelector('[data-slide="prev"]'),e=s.querySelector('[data-slide="next"]'),n=s.getAttribute("data-carousel-ride")==="true",f=Number(s.getAttribute("data-carousel-ride-interval")??"5000"),d=s.getAttribute("data-carousel-ride-only-after-interaction")==="true";let r=0,u=!1,i=null,A=0,b=0;const k=(o,c="right")=>{t.forEach((y,p)=>{y.classList.remove("active","slide-left","slide-right"),y.style.zIndex=0});const L=t[r],v=t[o];c==="right"?(L.classList.add("slide-left"),v.classList.add("slide-right")):(L.classList.add("slide-right"),v.classList.add("slide-left")),v.offsetWidth,L.classList.remove("active"),v.classList.add("active"),E.forEach((y,p)=>y.classList.toggle("active",p===o)),r=o},l=o=>{if(o===r)return;const c=(o+t.length)%t.length,v=(c-r+t.length)%t.length>t.length/2?"left":"right";k(c,v)},S=()=>{const c=b-A;Math.abs(c)>40&&(c<0?l((r+1)%t.length):l((r-1+t.length)%t.length),h())},g=()=>{m(),i=setInterval(()=>{l((r+1)%t.length)},f)},m=()=>{i!==null&&(clearInterval(i),i=null)},h=()=>{u||(u=!0,n&&d&&g()),n&&!d&&g()};E.forEach((o,c)=>{o.addEventListener("click",()=>{l(c),h()})}),a==null||a.addEventListener("click",()=>{l((r-1+t.length)%t.length),h()}),e==null||e.addEventListener("click",()=>{l((r+1)%t.length),h()}),s.addEventListener("mouseenter",m),s.addEventListener("mouseleave",()=>{n&&(!d||u)&&g()}),s.addEventListener("focusin",m),s.addEventListener("focusout",()=>{n&&(!d||u)&&g()}),s.addEventListener("keydown",o=>{o.key==="ArrowLeft"?(l((r-1+t.length)%t.length),h()):o.key==="ArrowRight"&&(l((r+1)%t.length),h())}),s.addEventListener("touchstart",o=>{A=o.changedTouches[0].screenX},{passive:!0}),s.addEventListener("touchend",o=>{b=o.changedTouches[0].screenX,S()},{passive:!0}),t.length>1&&n&&!d&&g()})});document.addEventListener("DOMContentLoaded",()=>{const s=e=>{const f=e.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])');if(f.length===0)return;const d=f[0],r=f[f.length-1],u=i=>{i.key==="Tab"&&(i.shiftKey?document.activeElement===d&&(i.preventDefault(),r.focus()):document.activeElement===r&&(i.preventDefault(),d.focus()))};e.addEventListener("keydown",u),e._trapFocusHandler=u,d.focus()},t=e=>{e._trapFocusHandler&&(e.removeEventListener("keydown",e._trapFocusHandler),delete e._trapFocusHandler)},E=e=>{console.log("openModal",e);const n=document.getElementById(e);if(!n){console.log("modal not found",e);return}n.classList.add("active"),n.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",s(n)},a=e=>{e.classList.remove("active"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="",t(e)};document.querySelectorAll("[data-modal-close]").forEach(e=>{e.addEventListener("click",()=>{const n=e.closest(".media-modal");n&&a(n)})}),document.querySelectorAll(".media-modal").forEach(e=>{e.addEventListener("click",n=>{n.target===e&&a(e)})}),document.querySelectorAll("[data-modal-trigger]").forEach(e=>{e.addEventListener("click",()=>{const n=e.getAttribute("data-modal-trigger");E(n)})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&document.querySelectorAll(".media-modal.active").forEach(n=>{a(n)})})});

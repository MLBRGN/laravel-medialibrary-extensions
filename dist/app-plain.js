document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-carousel]").forEach(o=>{const n=o.querySelectorAll(".carousel-item"),u=o.querySelectorAll(".carousel-indicators button"),p=o.querySelector('[data-slide="prev"]'),L=o.querySelector('[data-slide="next"]'),f=o.getAttribute("data-carousel-ride")==="true",m=Number(o.getAttribute("data-carousel-ride-interval")??"5000"),h=o.getAttribute("data-carousel-ride-only-after-interaction")==="true";let i=0,v=!1,e=null,t=0,l=0,y=0,d=0;const s=50,g=(a,c="right")=>{n.forEach(k=>{k.classList.remove("active","slide-left","slide-right"),k.style.zIndex=0});const S=n[i],b=n[a];o.getAttribute("data-carousel-effect")!=="fade"&&(c==="right"?(S.classList.add("slide-left"),b.classList.add("slide-right")):(S.classList.add("slide-right"),b.classList.add("slide-left"))),b.offsetWidth,S.classList.remove("active"),b.classList.add("active"),u.forEach((k,T)=>k.classList.toggle("active",T===a)),i=a;const I=new CustomEvent("carouselSlided",{bubbles:!0,detail:{carousel:o}});o.dispatchEvent(I)},r=a=>{if(a===i)return;const c=(a+n.length)%n.length,b=(c-i+n.length)%n.length>n.length/2?"left":"right";g(c,b)},q=()=>{const c=l-t;Math.abs(c)>40&&(c<0?r((i+1)%n.length):r((i-1+n.length)%n.length),E())},A=()=>{w(),e=setInterval(()=>{r((i+1)%n.length)},m)},w=()=>{e!==null&&(clearInterval(e),e=null)},E=()=>{v||(v=!0,f&&h&&A()),f&&!h&&A()};u.forEach((a,c)=>{a.addEventListener("click",()=>{r(c),E()})}),p==null||p.addEventListener("click",()=>{r((i-1+n.length)%n.length),E()}),L==null||L.addEventListener("click",()=>{r((i+1)%n.length),E()}),o.addEventListener("mouseenter",w),o.addEventListener("mouseleave",()=>{f&&(!h||v)&&A()}),o.addEventListener("focusin",w),o.addEventListener("focusout",()=>{f&&(!h||v)&&A()}),o.addEventListener("keydown",a=>{a.key==="ArrowLeft"?(r((i-1+n.length)%n.length),E()):a.key==="ArrowRight"&&(r((i+1)%n.length),E())}),o.addEventListener("touchstart",a=>{t=a.changedTouches[0].screenX,y=a.changedTouches[0].screenY},{passive:!0}),o.addEventListener("touchend",a=>{l=a.changedTouches[0].screenX,d=a.changedTouches[0].screenY,Math.abs(d-y)<s&&q()},{passive:!0}),n.length>1&&f&&!h&&A()})});document.addEventListener("DOMContentLoaded",()=>{const o=document.querySelectorAll(".media-modal"),n='a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])',u={},p=e=>{const t=e.querySelectorAll(n);if(t.length===0)return;const l=t[0],y=t[t.length-1],d=s=>{s.key==="Tab"&&(s.shiftKey?document.activeElement===l&&(s.preventDefault(),y.focus()):document.activeElement===y&&(s.preventDefault(),l.focus()))};e.addEventListener("keydown",d),e._trapFocusHandler=d,l.focus()},L=e=>{e._trapFocusHandler&&(e.removeEventListener("keydown",e._trapFocusHandler),delete e._trapFocusHandler)},f=e=>{console.log("openModal",e);const t=document.getElementById(e);if(!t){console.log("modal not found",e);return}t.classList.add("active"),t.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",p(t)},m=e=>{e.classList.remove("active"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="",L(e);const t=new CustomEvent("modalClosed",{bubbles:!0,detail:{modal:e}});e.dispatchEvent(t)};document.querySelectorAll("[data-modal-close]").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".media-modal");t&&m(t)})}),document.querySelectorAll(".media-modal").forEach(e=>{e.addEventListener("click",t=>{t.target===e&&m(e)})}),document.querySelectorAll("[data-modal-trigger]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-modal-trigger");f(t)})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&document.querySelectorAll(".media-modal.active").forEach(t=>{m(t)})}),o.forEach(e=>{const t=e.querySelector("[data-carousel]");let l=e.hasAttribute("data-video-autoplay");function y(d){const s=d.getAttribute("data-youtube-video-id"),g=d.querySelector("lite-youtube").shadowRoot.querySelector("iframe");u[s]=new YT.Player(g,{events:{onReady:()=>{l&&v(s)}}})}e.addEventListener("liteYoutubeIframeLoaded",d=>{const s=d.target.closest("[data-youtube-video-id]");s&&y(s)}),e.addEventListener("modalClosed",()=>{h()}),t.addEventListener("carouselSlided",d=>{if(i(),e.hasAttribute("data-video-autoplay")){const s=t.querySelector(".carousel-item.active");if(!s)return;const g=s.querySelector(".media-video-wrapper");if(g&&g.hasAttribute("data-youtube-video-id")){const r=g.getAttribute("data-youtube-video-id");v(r)}}})});function h(){Object.values(u).forEach(e=>{e.stopVideo()})}function i(){console.log("pauseAllVideoPlayBack"),Object.values(u).forEach(e=>{e.pauseVideo()})}function v(e){console.log("startAllVideoPlayBack");let t=u[e];t&&t.playVideo()}});

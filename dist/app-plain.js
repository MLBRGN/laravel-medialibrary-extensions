document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-carousel]").forEach(o=>{const t=o.querySelectorAll(".carousel-item"),E=o.querySelectorAll(".carousel-indicators button"),l=o.querySelector('[data-slide="prev"]'),e=o.querySelector('[data-slide="next"]'),n=o.getAttribute("data-carousel-ride")==="true",h=Number(o.getAttribute("data-carousel-ride-interval")??"5000"),r=o.getAttribute("data-carousel-ride-only-after-interaction")==="true";let c=0,u=!1,d=null,b=0,A=0,p=0,S=0;const w=50,q=(s,i="right")=>{t.forEach((y,k)=>{y.classList.remove("active","slide-left","slide-right"),y.style.zIndex=0});const L=t[c],g=t[s];i==="right"?(L.classList.add("slide-left"),g.classList.add("slide-right")):(L.classList.add("slide-right"),g.classList.add("slide-left")),g.offsetWidth,L.classList.remove("active"),g.classList.add("active"),E.forEach((y,k)=>y.classList.toggle("active",k===s)),c=s},a=s=>{if(s===c)return;const i=(s+t.length)%t.length,g=(i-c+t.length)%t.length>t.length/2?"left":"right";q(i,g)},I=()=>{const i=A-b;Math.abs(i)>40&&(i<0?a((c+1)%t.length):a((c-1+t.length)%t.length),f())},v=()=>{m(),d=setInterval(()=>{a((c+1)%t.length)},h)},m=()=>{d!==null&&(clearInterval(d),d=null)},f=()=>{u||(u=!0,n&&r&&v()),n&&!r&&v()};E.forEach((s,i)=>{s.addEventListener("click",()=>{a(i),f()})}),l==null||l.addEventListener("click",()=>{a((c-1+t.length)%t.length),f()}),e==null||e.addEventListener("click",()=>{a((c+1)%t.length),f()}),o.addEventListener("mouseenter",m),o.addEventListener("mouseleave",()=>{n&&(!r||u)&&v()}),o.addEventListener("focusin",m),o.addEventListener("focusout",()=>{n&&(!r||u)&&v()}),o.addEventListener("keydown",s=>{s.key==="ArrowLeft"?(a((c-1+t.length)%t.length),f()):s.key==="ArrowRight"&&(a((c+1)%t.length),f())}),o.addEventListener("touchstart",s=>{b=s.changedTouches[0].screenX,p=s.changedTouches[0].screenY},{passive:!0}),o.addEventListener("touchend",s=>{A=s.changedTouches[0].screenX,S=s.changedTouches[0].screenY,Math.abs(S-p)<w&&I()},{passive:!0}),t.length>1&&n&&!r&&v()})});document.addEventListener("DOMContentLoaded",()=>{const o=e=>{const h=e.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])');if(h.length===0)return;const r=h[0],c=h[h.length-1],u=d=>{d.key==="Tab"&&(d.shiftKey?document.activeElement===r&&(d.preventDefault(),c.focus()):document.activeElement===c&&(d.preventDefault(),r.focus()))};e.addEventListener("keydown",u),e._trapFocusHandler=u,r.focus()},t=e=>{e._trapFocusHandler&&(e.removeEventListener("keydown",e._trapFocusHandler),delete e._trapFocusHandler)},E=e=>{console.log("openModal",e);const n=document.getElementById(e);if(!n){console.log("modal not found",e);return}n.classList.add("active"),n.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",o(n)},l=e=>{e.classList.remove("active"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="",t(e)};document.querySelectorAll("[data-modal-close]").forEach(e=>{e.addEventListener("click",()=>{const n=e.closest(".media-modal");n&&l(n)})}),document.querySelectorAll(".media-modal").forEach(e=>{e.addEventListener("click",n=>{n.target===e&&l(e)})}),document.querySelectorAll("[data-modal-trigger]").forEach(e=>{e.addEventListener("click",()=>{const n=e.getAttribute("data-modal-trigger");E(n)})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&document.querySelectorAll(".media-modal.active").forEach(n=>{l(n)})})});

import"./image-editor-listener.js";import"./ImageEditor.js";function k(t,i){const l=new CustomEvent(t,{bubbles:!0,detail:{element:i}});i.dispatchEvent(l)}function P(t){const i='a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])',l=()=>Array.from(t.querySelectorAll(i)).filter(d=>!d.hasAttribute("disabled")&&d.offsetParent!==null),v=d=>{const f=l();console.log(f);const e=f[0],o=f[f.length-1];if(d.key==="Tab"){if(f.length===0)return;d.shiftKey?document.activeElement===e&&(d.preventDefault(),o.focus()):document.activeElement===o&&(d.preventDefault(),e.focus())}};t.addEventListener("keydown",v),t._trapFocusHandler=v;const h=l();h.length&&h[0].focus()}function x(t){t._trapFocusHandler&&(t.removeEventListener("keydown",t._trapFocusHandler),delete t._trapFocusHandler)}const q=new Map;function T(t){return q.get(t)}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-carousel]").forEach(t=>{const i=t.querySelectorAll(".media-carousel-item"),l=t.querySelectorAll(".media-carousel-indicators button"),v=t.querySelector('[data-slide="prev"]'),h=t.querySelector('[data-slide="next"]'),d=t.getAttribute("data-carousel-ride")==="true",f=Number(t.getAttribute("data-carousel-ride-interval")??"5000"),e=t.getAttribute("data-carousel-ride-only-after-interaction")==="true";let o=0,s=!1,n=null,r=0,g=0,y=0,S=0;const I=50,C=(a,c="right")=>{i.forEach(p=>{p.classList.remove("active","slide-in-from-left","slide-in-from-right","slide-out-to-left","slide-out-to-right"),p.style.zIndex=0});const E=i[o],L=i[a];t.getAttribute("data-carousel-effect")==="slide"&&(t.classList.contains("temp-no-animation")||t.classList.contains("no-animation")||(c==="right"?(L.classList.add("slide-in-from-right"),E.classList.add("slide-out-to-left")):(L.classList.add("slide-in-from-left"),E.classList.add("slide-out-to-right")),L.offsetWidth)),E.classList.remove("active"),L.classList.add("active"),l.forEach((p,M)=>p.classList.toggle("active",M===a)),o=a,k("carouselSlided",t)},u=(a,c=!1)=>{if(a===o)return;const E=(a+i.length)%i.length,p=(E-o+i.length)%i.length>i.length/2?"left":"right";c&&t.classList.add("temp-no-animation"),C(E,p),c&&setTimeout(()=>{t.classList.remove("temp-no-animation")},1e3)},D=()=>{const c=g-r;Math.abs(c)>40&&Math.abs(c)>Math.abs(S-y)&&(c<0?u((o+1)%i.length):u((o-1+i.length)%i.length),b())},m=()=>{A(),n=setInterval(()=>{u((o+1)%i.length)},f)},A=()=>{n!==null&&(clearInterval(n),n=null)},b=()=>{s||(s=!0,d&&e&&m()),d&&!e&&m()};l.forEach((a,c)=>{a.addEventListener("click",()=>{u(c),b()})}),v==null||v.addEventListener("click",()=>{u((o-1+i.length)%i.length),b()}),h==null||h.addEventListener("click",()=>{u((o+1)%i.length),b()}),t.addEventListener("mouseenter",A),t.addEventListener("mouseleave",()=>{d&&(!e||s)&&m()}),t.addEventListener("focusin",A),t.addEventListener("focusout",()=>{d&&(!e||s)&&m()}),t.addEventListener("keydown",a=>{a.key==="ArrowLeft"?(a.preventDefault(),u((o-1+i.length)%i.length),b()):a.key==="ArrowRight"&&(a.preventDefault(),u((o+1)%i.length),b())}),t.addEventListener("touchstart",a=>{r=a.changedTouches[0].screenX,y=a.changedTouches[0].screenY},{passive:!0}),t.addEventListener("touchend",a=>{g=a.changedTouches[0].screenX,S=a.changedTouches[0].screenY,Math.abs(S-y)<I&&D()},{passive:!0}),i.length>1&&d&&!e&&m();const w={goToSlide:(a,c=!1)=>u(a,c),getCurrentIndex:()=>o,goToNextSlide:()=>u((o+1)%i.length),goToPreviousSlide:()=>u((o-1+i.length)%i.length),pause:A,resume:m};q.set(t,w),t._carouselController=w})});document.addEventListener("DOMContentLoaded",()=>{const t={};function i(e,o=0){const s=document.getElementById(e);if(!s)return console.warn("Modal not found:",e);s.classList.add("active"),s.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",P(s);const n=s.querySelector("[data-carousel]"),r=T(n);r&&r.goToSlide(parseInt(o),!0),k("modalOpened",s)}function l(e){e.classList.remove("active"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="",x(e),k("modalClosed",e)}document.addEventListener("click",e=>{const o=e.target.closest("[data-modal-trigger]");if(o){e.preventDefault(),i(o.getAttribute("data-modal-trigger"),o.getAttribute("data-slide-to")||0);return}const s=e.target.closest("[data-modal-close]");if(s){const r=s.closest("[data-modal]");r&&l(r);return}const n=e.target.closest("[data-modal]");n&&e.target===n&&l(n)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&document.querySelectorAll("[data-modal].active").forEach(l)});function v(e){const o=e.querySelector("[data-carousel]"),s=e.hasAttribute("data-video-autoplay");e.addEventListener("liteYoutubeIframeLoaded",n=>{const r=n.target.closest("[data-youtube-video-id]");if(!r)return;const g=r.getAttribute("data-youtube-video-id"),y=r.querySelector("lite-youtube").shadowRoot.querySelector("iframe");t[g]=new YT.Player(y,{events:{onReady:()=>{}}})}),e.addEventListener("modalOpened",()=>{if(!s)return;const n=e.querySelector(".media-carousel-item.active");if(!n)return;const r=n.querySelector(".media-video-container[data-youtube-video-id]");r&&f(r.getAttribute("data-youtube-video-id"))}),e.addEventListener("modalClosed",h),e.addEventListener("keydown",n=>{if(!e.classList.contains("active"))return;const r=e.querySelector("[data-carousel]");if(!r)return;const g=T(r);if(!g)return;const y=r.contains(n.target);if(n.key==="Escape"){l(e),n.stopPropagation(),n.preventDefault();return}(n.key==="ArrowLeft"||n.key==="ArrowRight")&&y||(n.key==="ArrowLeft"?(n.preventDefault(),n.stopPropagation(),g.goToPreviousSlide()):n.key==="ArrowRight"&&(n.preventDefault(),n.stopPropagation(),g.goToNextSlide()))}),o&&o.addEventListener("carouselSlided",()=>{if(d(),!s)return;const n=o.querySelector(".media-carousel-item.active");if(!n)return;const r=n.querySelector(".media-video-container[data-youtube-video-id]");r&&f(r.getAttribute("data-youtube-video-id"))})}function h(){Object.values(t).forEach(e=>e.stopVideo())}function d(){Object.values(t).forEach(e=>e.pauseVideo())}function f(e){const o=t[e];o&&o.playVideo()}document.querySelectorAll("[data-modal]").forEach(v)});

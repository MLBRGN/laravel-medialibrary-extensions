function k(t,n){const c=new CustomEvent(t,{bubbles:!0,detail:{element:n}});n.dispatchEvent(c)}function M(t){const c=t.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])');if(c.length===0)return;const u=c[0],y=c[c.length-1],v=g=>{g.key==="Tab"&&(g.shiftKey?document.activeElement===u&&(g.preventDefault(),y.focus()):document.activeElement===y&&(g.preventDefault(),u.focus()))};t.addEventListener("keydown",v),t._trapFocusHandler=v,u.focus()}function P(t){t._trapFocusHandler&&(t.removeEventListener("keydown",t._trapFocusHandler),delete t._trapFocusHandler)}const q=new Map;function B(t){return console.log("carousels.get carousels",q),q.get(t)}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-carousel]").forEach(t=>{const n=t.querySelectorAll(".media-carousel-item"),c=t.querySelectorAll(".media-carousel-indicators button"),u=t.querySelector('[data-slide="prev"]'),y=t.querySelector('[data-slide="next"]'),v=t.getAttribute("data-carousel-ride")==="true",g=Number(t.getAttribute("data-carousel-ride-interval")??"5000"),e=t.getAttribute("data-carousel-ride-only-after-interaction")==="true";let o=0,i=!1,f=null,l=0,s=0,d=0,b=0;const I=50,T=(a,r="right")=>{console.log(a,r),n.forEach(m=>{m.classList.remove("active","slide-in-from-left","slide-in-from-right","slide-out-to-left","slide-out-to-right"),m.style.zIndex=0});const L=n[o],A=n[a];t.getAttribute("data-carousel-effect")==="slide"&&(t.classList.contains("temp-no-animation")||t.classList.contains("no-animation")||(r==="right"?(A.classList.add("slide-in-from-right"),L.classList.add("slide-out-to-left")):(A.classList.add("slide-in-from-left"),L.classList.add("slide-out-to-right")),A.offsetWidth)),L.classList.remove("active"),A.classList.add("active"),c.forEach((m,V)=>m.classList.toggle("active",V===a)),o=a,k("carouselSlided",t)},h=(a,r=!1)=>{if(console.log("goToSlide",a,r),a===o)return;console.log("go to slide",a);const L=(a+n.length)%n.length,m=(L-o+n.length)%n.length>n.length/2?"left":"right";r&&t.classList.add("temp-no-animation"),T(L,m),r&&setTimeout(()=>{t.classList.remove("temp-no-animation")},1e3)},C=()=>{const r=s-l;Math.abs(r)>40&&Math.abs(r)>Math.abs(b-d)&&(r<0?h((o+1)%n.length):h((o-1+n.length)%n.length),E())},p=()=>{S(),f=setInterval(()=>{h((o+1)%n.length)},g)},S=()=>{f!==null&&(clearInterval(f),f=null)},E=()=>{i||(i=!0,v&&e&&p()),v&&!e&&p()};c.forEach((a,r)=>{a.addEventListener("click",()=>{h(r),E()})}),u==null||u.addEventListener("click",()=>{h((o-1+n.length)%n.length),E()}),y==null||y.addEventListener("click",()=>{h((o+1)%n.length),E()}),t.addEventListener("mouseenter",S),t.addEventListener("mouseleave",()=>{v&&(!e||i)&&p()}),t.addEventListener("focusin",S),t.addEventListener("focusout",()=>{v&&(!e||i)&&p()}),t.addEventListener("keydown",a=>{a.key==="ArrowLeft"?(h((o-1+n.length)%n.length),E()):a.key==="ArrowRight"&&(h((o+1)%n.length),E())}),t.addEventListener("touchstart",a=>{l=a.changedTouches[0].screenX,d=a.changedTouches[0].screenY},{passive:!0}),t.addEventListener("touchend",a=>{s=a.changedTouches[0].screenX,b=a.changedTouches[0].screenY,Math.abs(b-d)<I&&C()},{passive:!0}),n.length>1&&v&&!e&&p();const w={goToSlide:(a,r=!1)=>h(a,r),getCurrentIndex:()=>o,next:()=>h((o+1)%n.length),prev:()=>h((o-1+n.length)%n.length),pause:S,resume:p};q.set(t,w),t._carouselController=w})});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll(".media-modal"),n={},c=(e,o)=>{const i=document.getElementById(e);if(!i){console.log("modal not found",e);return}i.classList.add("active"),i.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",M(i);const f=i.querySelector("[data-carousel]"),l=B(f);console.log("carousel",f,l),l&&o!==void 0&&o!==null&&l.goToSlide(parseInt(o),!0),k("modalOpened",i)},u=e=>{e.classList.remove("active"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="",P(e),k("modalClosed",e)};document.querySelectorAll("[data-modal-close]").forEach(e=>{e.addEventListener("click",()=>{const o=e.closest(".media-modal");o&&u(o)})}),document.querySelectorAll(".media-modal").forEach(e=>{e.addEventListener("click",o=>{o.target===e&&u(e)})}),document.querySelectorAll("[data-modal-trigger]").forEach(e=>{e.addEventListener("click",o=>{let i=0;e.hasAttribute("data-slide-to")&&(i=e.getAttribute("data-slide-to"));const f=e.getAttribute("data-modal-trigger");c(f,i)})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&document.querySelectorAll(".media-modal.active").forEach(o=>{u(o)})}),t.forEach(e=>{const o=e.querySelector("[data-carousel]");let i=e.hasAttribute("data-video-autoplay");function f(l){const s=l.getAttribute("data-youtube-video-id"),d=l.querySelector("lite-youtube").shadowRoot.querySelector("iframe");n[s]=new YT.Player(d,{events:{onReady:()=>{i&&g(s)}}})}e.addEventListener("liteYoutubeIframeLoaded",l=>{const s=l.target.closest("[data-youtube-video-id]");s&&f(s)}),e.addEventListener("modalOpened",l=>{if(!e.hasAttribute("data-video-autoplay"))return;const s=e.querySelector(".media-carousel-item.active");if(!s)return;const d=s.querySelector(".media-video-container");if(!d||!d.hasAttribute("data-youtube-video-id"))return;const b=d.getAttribute("data-youtube-video-id");g(b)}),e.addEventListener("modalClosed",()=>{y()}),o.addEventListener("carouselSlided",l=>{if(v(),e.hasAttribute("data-video-autoplay")){const s=o.querySelector(".media-carousel-item.active");if(!s)return;const d=s.querySelector(".media-video-container");if(d&&d.hasAttribute("data-youtube-video-id")){const b=d.getAttribute("data-youtube-video-id");g(b)}}})});function y(){console.log("stopAllVideoPlayBack"),Object.values(n).forEach(e=>{e.stopVideo()})}function v(){console.log("pauseAllVideoPlayBack"),Object.values(n).forEach(e=>{e.pauseVideo()})}function g(e){console.log("startVideoPlayBack");let o=n[e];o&&o.playVideo()}});

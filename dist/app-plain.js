function k(t,n){const c=new CustomEvent(t,{bubbles:!0,detail:{element:n}});n.dispatchEvent(c)}function M(t){const c=t.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])');if(c.length===0)return;const u=c[0],g=c[c.length-1],h=v=>{v.key==="Tab"&&(v.shiftKey?document.activeElement===u&&(v.preventDefault(),g.focus()):document.activeElement===g&&(v.preventDefault(),u.focus()))};t.addEventListener("keydown",h),t._trapFocusHandler=h,u.focus()}function B(t){t._trapFocusHandler&&(t.removeEventListener("keydown",t._trapFocusHandler),delete t._trapFocusHandler)}const q=new Map;function O(t){return console.log("carousels.get carousels",q),q.get(t)}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-carousel]").forEach(t=>{const n=t.querySelectorAll(".media-carousel-item"),c=t.querySelectorAll(".media-carousel-indicators button"),u=t.querySelector('[data-slide="prev"]'),g=t.querySelector('[data-slide="next"]'),h=t.getAttribute("data-carousel-ride")==="true",v=Number(t.getAttribute("data-carousel-ride-interval")??"5000"),e=t.getAttribute("data-carousel-ride-only-after-interaction")==="true";let o=0,s=!1,r=null,i=0,d=0,y=0,S=0;const I=50,T=(a,l="right")=>{console.log(a,l),n.forEach(b=>{b.classList.remove("active","slide-in-from-left","slide-in-from-right","slide-out-to-left","slide-out-to-right"),b.style.zIndex=0});const E=n[o],L=n[a];t.getAttribute("data-carousel-effect")==="slide"&&(t.classList.contains("temp-no-animation")||t.classList.contains("no-animation")||(l==="right"?(L.classList.add("slide-in-from-right"),E.classList.add("slide-out-to-left")):(L.classList.add("slide-in-from-left"),E.classList.add("slide-out-to-right")),L.offsetWidth)),E.classList.remove("active"),L.classList.add("active"),c.forEach((b,V)=>b.classList.toggle("active",V===a)),o=a,k("carouselSlided",t)},f=(a,l=!1)=>{if(console.log("goToSlide",a,l),a===o)return;console.log("go to slide",a);const E=(a+n.length)%n.length,b=(E-o+n.length)%n.length>n.length/2?"left":"right";l&&t.classList.add("temp-no-animation"),T(E,b),l&&setTimeout(()=>{t.classList.remove("temp-no-animation")},1e3)},C=()=>{const l=d-i;Math.abs(l)>40&&Math.abs(l)>Math.abs(S-y)&&(l<0?f((o+1)%n.length):f((o-1+n.length)%n.length),p())},m=()=>{A(),r=setInterval(()=>{f((o+1)%n.length)},v)},A=()=>{r!==null&&(clearInterval(r),r=null)},p=()=>{s||(s=!0,h&&e&&m()),h&&!e&&m()};c.forEach((a,l)=>{a.addEventListener("click",()=>{f(l),p()})}),u==null||u.addEventListener("click",()=>{f((o-1+n.length)%n.length),p()}),g==null||g.addEventListener("click",()=>{f((o+1)%n.length),p()}),t.addEventListener("mouseenter",A),t.addEventListener("mouseleave",()=>{h&&(!e||s)&&m()}),t.addEventListener("focusin",A),t.addEventListener("focusout",()=>{h&&(!e||s)&&m()}),t.addEventListener("keydown",a=>{a.key==="ArrowLeft"?(f((o-1+n.length)%n.length),p()):a.key==="ArrowRight"&&(f((o+1)%n.length),p())}),t.addEventListener("touchstart",a=>{i=a.changedTouches[0].screenX,y=a.changedTouches[0].screenY},{passive:!0}),t.addEventListener("touchend",a=>{d=a.changedTouches[0].screenX,S=a.changedTouches[0].screenY,Math.abs(S-y)<I&&C()},{passive:!0}),n.length>1&&h&&!e&&m();const w={goToSlide:(a,l=!1)=>f(a,l),getCurrentIndex:()=>o,next:()=>f((o+1)%n.length),prev:()=>f((o-1+n.length)%n.length),pause:A,resume:m};q.set(t,w),t._carouselController=w})});document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll(".media-modal"),n={},c=(e,o)=>{const s=document.getElementById(e);if(!s){console.log("modal not found",e);return}s.classList.add("active"),s.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",M(s);const r=s.querySelector("[data-carousel]"),i=O(r);console.log("carousel",r,i),i&&o!==void 0&&o!==null&&i.goToSlide(parseInt(o),!0),k("modalOpened",s)},u=e=>{e.classList.remove("active"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="",B(e),k("modalClosed",e)};document.querySelectorAll("[data-modal-close]").forEach(e=>{e.addEventListener("click",()=>{const o=e.closest(".media-modal");o&&u(o)})}),document.querySelectorAll(".media-modal").forEach(e=>{e.addEventListener("click",o=>{o.target===e&&u(e)})}),document.querySelectorAll("[data-modal-trigger]").forEach(e=>{e.addEventListener("click",o=>{let s=0;e.hasAttribute("data-slide-to")&&(s=e.getAttribute("data-slide-to"));const r=e.getAttribute("data-modal-trigger");c(r,s)})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&document.querySelectorAll(".media-modal.active").forEach(o=>{u(o)})}),t.forEach(e=>{const o=e.querySelector("[data-carousel]");e.hasAttribute("data-video-autoplay");function s(r){const i=r.getAttribute("data-youtube-video-id"),d=r.querySelector("lite-youtube").shadowRoot.querySelector("iframe");n[i]=new YT.Player(d,{events:{onReady:()=>{}}})}e.addEventListener("liteYoutubeIframeLoaded",r=>{const i=r.target.closest("[data-youtube-video-id]");i&&s(i)}),e.addEventListener("modalOpened",r=>{if(!e.hasAttribute("data-video-autoplay"))return;const i=e.querySelector(".media-carousel-item.active");if(!i)return;const d=i.querySelector(".media-video-container");if(!d||!d.hasAttribute("data-youtube-video-id"))return;const y=d.getAttribute("data-youtube-video-id");v(y)}),e.addEventListener("modalClosed",()=>{g()}),o.addEventListener("carouselSlided",r=>{if(h(),e.hasAttribute("data-video-autoplay")){const i=o.querySelector(".media-carousel-item.active");if(!i)return;const d=i.querySelector(".media-video-container");if(d&&d.hasAttribute("data-youtube-video-id")){const y=d.getAttribute("data-youtube-video-id");v(y)}}})});function g(){console.log("stopAllVideoPlayBack"),Object.values(n).forEach(e=>{e.stopVideo()})}function h(){console.log("pauseAllVideoPlayBack"),Object.values(n).forEach(e=>{e.pauseVideo()})}function v(e){console.log("startVideoPlayBack");let o=n[e];o&&o.playVideo()}});

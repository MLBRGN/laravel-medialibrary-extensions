import{f as x}from"./_helpers.js";const u=new Map;function R(e){return u.get(e)}function k(e){u.has(e)&&(u.get(e).pause(),u.delete(e));const t=e.querySelectorAll("[data-carousel-item]");if(!t.length)return;const b=e.querySelectorAll("[data-carousel-indicators] button"),S=e.querySelector('[data-slide="prev"]'),A=e.querySelector('[data-slide="next"]'),h=e.getAttribute("data-carousel-ride")==="true",w=Number(e.getAttribute("data-carousel-ride-interval")??"5000"),f=e.getAttribute("data-carousel-ride-only-after-interaction")==="true";let i=0,g=!1,v=null,y=0,T=0,m=0,L=0;const I=50,M=(n,s="right",E=!1)=>{t.forEach(c=>{c.classList.remove("active","slide-in-from-left","slide-in-from-right","slide-out-to-left","slide-out-to-right")});const l=t[i],o=t[n];e.getAttribute("data-carousel-effect")==="slide"&&(e.classList.contains("temp-no-animation")||e.classList.contains("no-animation")||(s==="right"?(o.classList.add("slide-in-from-right"),l.classList.add("slide-out-to-left")):(o.classList.add("slide-in-from-left"),l.classList.add("slide-out-to-right")),o.offsetWidth)),l.classList.remove("active"),o.classList.add("active"),b.forEach((c,X)=>c.classList.toggle("active",X===n)),i=n,x("mleCarouselSlided",e,{carousel:e,currentSlide:o,currentSlideIndex:i})},a=(n,s=!1,E=!1)=>{if(n===i)return;const l=(n+t.length)%t.length,c=(l-i+t.length)%t.length>t.length/2?"left":"right";s&&(e.classList.add("temp-no-animation"),e.offsetWidth),M(l,c,E),s&&e.classList.remove("temp-no-animation")},q=()=>{const s=T-y;Math.abs(s)>40&&Math.abs(s)>Math.abs(L-m)&&(s<0?a((i+1)%t.length):a((i-1+t.length)%t.length),d()),y=T=m=L=0},r=()=>{p(),v=setInterval(()=>a((i+1)%t.length),w)},p=()=>{v!==null&&(clearInterval(v),v=null)},d=()=>{g||(g=!0,h&&f&&r()),h&&!f&&r()};b.forEach((n,s)=>n.addEventListener("click",()=>{a(s),d()})),S==null||S.addEventListener("click",()=>{a((i-1+t.length)%t.length),d()}),A==null||A.addEventListener("click",()=>{a((i+1)%t.length),d()}),e.addEventListener("mouseenter",p),e.addEventListener("mouseleave",()=>{h&&(!f||g)&&r()}),e.addEventListener("focusin",p),e.addEventListener("focusout",()=>{h&&(!f||g)&&r()}),e.addEventListener("keydown",n=>{n.key==="ArrowLeft"?(n.preventDefault(),a((i-1+t.length)%t.length),d()):n.key==="ArrowRight"&&(n.preventDefault(),a((i+1)%t.length),d())}),e.addEventListener("touchstart",n=>{y=n.changedTouches[0].screenX,m=n.changedTouches[0].screenY},{passive:!0}),e.addEventListener("touchend",n=>{T=n.changedTouches[0].screenX,L=n.changedTouches[0].screenY,Math.abs(L-m)<I&&q()},{passive:!0}),t.length>1&&h&&!f&&r();const C={goToSlide:(n,s=!1,E=!1)=>a(n,s,E),getCurrentSlideIndex:()=>i,goToNextSlide:()=>a((i+1)%t.length),goToPreviousSlide:()=>a((i-1+t.length)%t.length),pause:p,resume:r};u.set(e,C)}document.addEventListener("mediaManagerPreviewsUpdated",e=>{e.detail.mediaManager,document.querySelectorAll("[data-carousel]").forEach(k)});document.querySelectorAll("[data-carousel]").forEach(k);export{R as g};

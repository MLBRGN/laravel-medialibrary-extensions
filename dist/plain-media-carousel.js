import{f as Y}from"./_helpers.js";const m=new Map;function R(e){return m.get(e)}function w(e){m.has(e)&&(m.get(e).pause(),m.delete(e));const t=e.querySelectorAll("[data-mle-carousel-item]");if(!t.length)return;const S=e.querySelectorAll("[data-mle-carousel-indicators] button"),A=e.querySelector('[data-mle-slide="prev"]'),y=e.querySelector('[data-mle-slide="next"]'),h=e.getAttribute("data-mle-carousel-ride")==="true",I=Number(e.getAttribute("data-mle-carousel-ride-interval")??"5000"),f=e.getAttribute("data-mle-carousel-ride-only-after-interaction")==="true";let n=0,g=!1,u=null,T=0,b=0,v=0,L=0;const M=50,q=(i,s="right",p=!1)=>{t.forEach(a=>{a.classList.remove("active","mle-active","mle-slide-in-from-left","mle-slide-in-from-right","mle-slide-out-to-left","mle-slide-out-to-right")});const r=t[n],d=t[i];e.getAttribute("data-mle-carousel-effect")==="slide"&&(e.classList.contains("temp-no-animation")||e.classList.contains("no-animation")||(s==="right"?(d.classList.add("mle-slide-in-from-right"),r.classList.add("mle-slide-out-to-left")):(d.classList.add("mle-slide-in-from-left"),r.classList.add("mle-slide-out-to-right")),d.offsetWidth)),r.classList.remove("active"),r.classList.remove("mle-active"),d.classList.add("active"),d.classList.add("mle-active"),S.forEach((a,k)=>a.classList.toggle("active",k===i)),S.forEach((a,k)=>a.classList.toggle("mle-active",k===i)),n=i,Y("mleCarouselSlided",e,{carousel:e,currentSlide:d,currentSlideIndex:n})},l=(i,s=!1,p=!1)=>{if(i===n)return;const r=(i+t.length)%t.length,a=(r-n+t.length)%t.length>t.length/2?"left":"right";s&&(e.classList.add("temp-no-animation"),e.offsetWidth),q(r,a,p),s&&e.classList.remove("temp-no-animation")},C=()=>{const s=b-T;Math.abs(s)>40&&Math.abs(s)>Math.abs(L-v)&&(s<0?l((n+1)%t.length):l((n-1+t.length)%t.length),c()),T=b=v=L=0},o=()=>{E(),u=setInterval(()=>l((n+1)%t.length),I)},E=()=>{u!==null&&(clearInterval(u),u=null)},c=()=>{g||(g=!0,h&&f&&o()),h&&!f&&o()};S.forEach((i,s)=>i.addEventListener("click",()=>{l(s),c()})),A==null||A.addEventListener("click",()=>{l((n-1+t.length)%t.length),c()}),y==null||y.addEventListener("click",()=>{l((n+1)%t.length),c()}),e.addEventListener("mouseenter",E),e.addEventListener("mouseleave",()=>{h&&(!f||g)&&o()}),e.addEventListener("focusin",E),e.addEventListener("focusout",()=>{h&&(!f||g)&&o()}),e.addEventListener("keydown",i=>{i.key==="ArrowLeft"?(i.preventDefault(),l((n-1+t.length)%t.length),c()):i.key==="ArrowRight"&&(i.preventDefault(),l((n+1)%t.length),c())}),e.addEventListener("touchstart",i=>{T=i.changedTouches[0].screenX,v=i.changedTouches[0].screenY},{passive:!0}),e.addEventListener("touchend",i=>{b=i.changedTouches[0].screenX,L=i.changedTouches[0].screenY,Math.abs(L-v)<M&&C()},{passive:!0}),t.length>1&&h&&!f&&o();const X={goToSlide:(i,s=!1,p=!1)=>l(i,s,p),getCurrentSlideIndex:()=>n,goToNextSlide:()=>l((n+1)%t.length),goToPreviousSlide:()=>l((n-1+t.length)%t.length),pause:E,resume:o};m.set(e,X)}document.addEventListener("mediaManagerPreviewsUpdated",e=>{e.detail.mediaManager,document.querySelectorAll("[data-mle-carousel]").forEach(w)});document.querySelectorAll("[data-mle-carousel]").forEach(w);export{R as g};

import{f as x}from"./_helpers.js";const u=new Map;function R(e){return u.get(e)}function k(e){u.has(e)&&(u.get(e).pause(),u.delete(e));const t=e.querySelectorAll("[data-mle-carousel-item]");if(!t.length)return;const b=e.querySelectorAll("[data-mle-carousel-indicators] button"),S=e.querySelector('[data-slide="prev"]'),A=e.querySelector('[data-slide="next"]'),h=e.getAttribute("data-mle-carousel-ride")==="true",w=Number(e.getAttribute("data-mle-carousel-ride-interval")??"5000"),f=e.getAttribute("data-mle-carousel-ride-only-after-interaction")==="true";let i=0,g=!1,m=null,y=0,T=0,v=0,L=0;const I=50,M=(n,s="right",E=!1)=>{t.forEach(c=>{c.classList.remove("active","slide-in-from-left","slide-in-from-right","slide-out-to-left","slide-out-to-right")});const d=t[i],o=t[n];e.getAttribute("data-mle-carousel-effect")==="slide"&&(e.classList.contains("temp-no-animation")||e.classList.contains("no-animation")||(s==="right"?(o.classList.add("slide-in-from-right"),d.classList.add("slide-out-to-left")):(o.classList.add("slide-in-from-left"),d.classList.add("slide-out-to-right")),o.offsetWidth)),d.classList.remove("active"),o.classList.add("active"),b.forEach((c,X)=>c.classList.toggle("active",X===n)),i=n,x("mleCarouselSlided",e,{carousel:e,currentSlide:o,currentSlideIndex:i})},a=(n,s=!1,E=!1)=>{if(n===i)return;const d=(n+t.length)%t.length,c=(d-i+t.length)%t.length>t.length/2?"left":"right";s&&(e.classList.add("temp-no-animation"),e.offsetWidth),M(d,c,E),s&&e.classList.remove("temp-no-animation")},q=()=>{const s=T-y;Math.abs(s)>40&&Math.abs(s)>Math.abs(L-v)&&(s<0?a((i+1)%t.length):a((i-1+t.length)%t.length),r()),y=T=v=L=0},l=()=>{p(),m=setInterval(()=>a((i+1)%t.length),w)},p=()=>{m!==null&&(clearInterval(m),m=null)},r=()=>{g||(g=!0,h&&f&&l()),h&&!f&&l()};b.forEach((n,s)=>n.addEventListener("click",()=>{a(s),r()})),S==null||S.addEventListener("click",()=>{a((i-1+t.length)%t.length),r()}),A==null||A.addEventListener("click",()=>{a((i+1)%t.length),r()}),e.addEventListener("mouseenter",p),e.addEventListener("mouseleave",()=>{h&&(!f||g)&&l()}),e.addEventListener("focusin",p),e.addEventListener("focusout",()=>{h&&(!f||g)&&l()}),e.addEventListener("keydown",n=>{n.key==="ArrowLeft"?(n.preventDefault(),a((i-1+t.length)%t.length),r()):n.key==="ArrowRight"&&(n.preventDefault(),a((i+1)%t.length),r())}),e.addEventListener("touchstart",n=>{y=n.changedTouches[0].screenX,v=n.changedTouches[0].screenY},{passive:!0}),e.addEventListener("touchend",n=>{T=n.changedTouches[0].screenX,L=n.changedTouches[0].screenY,Math.abs(L-v)<I&&q()},{passive:!0}),t.length>1&&h&&!f&&l();const C={goToSlide:(n,s=!1,E=!1)=>a(n,s,E),getCurrentSlideIndex:()=>i,goToNextSlide:()=>a((i+1)%t.length),goToPreviousSlide:()=>a((i-1+t.length)%t.length),pause:p,resume:l};u.set(e,C)}document.addEventListener("mediaManagerPreviewsUpdated",e=>{e.detail.mediaManager,document.querySelectorAll("[data-mle-carousel]").forEach(k)});document.querySelectorAll("[data-mle-carousel]").forEach(k);export{R as g};

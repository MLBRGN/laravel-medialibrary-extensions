const l=e=>{if(typeof bootstrap>"u"||!bootstrap.Modal){console.warn("Bootstrap Modal is not available.");return}bootstrap.Modal.getInstance(e).hide()};function m(e){const t=e.imageEditorInstance,i=t.getAttribute("data-initiator-id"),d=t.getAttribute("data-medium-display-name"),o=t.getAttribute("data-medium-path");t.setImage(d,o,i),t.setConfiguration({debug:!1,rotateDegreesStep:90,freeSelectDisabled:!0,freeRotateDisabled:!0,freeResizeDisabled:!0,filtersDisabled:!0,selectionAspectRatios:["16:9","4:3"],selectionAspectRatio:"16:9"})}function n(e){if(e.dataset.imageEditorInitialized)return;const t=e.querySelector("[data-image-editor-placeholder]");e.addEventListener("show.bs.modal",function(){const i=JSON.parse(e.querySelector(".image-editor-modal-config").value),d=e.getAttribute("data-medium-path"),o=e.getAttribute("data-medium-display-name"),r=i.initiatorId,a=document.createElement("image-editor");a.setAttribute("id","my-image-editor"),a.setAttribute("data-medium-display-name",o),a.setAttribute("data-medium-path",d),a.setAttribute("data-initiator-id",r),a.addEventListener("imageEditorReady",s=>{m(s.detail)}),t.appendChild(a)}),e.addEventListener("hidden.bs.modal",function(){t.innerHTML=""}),e.dataset.imageEditorInitialized="true"}document.addEventListener("mediaManagerPreviewsUpdated",e=>{e.detail.mediaManager.querySelectorAll("[data-image-editor-modal]").forEach(n)});document.addEventListener("imageEditorModalCloseRequest",e=>{const t=e.detail.modal;l(t)});document.querySelectorAll("[data-image-editor-modal]").forEach(n);

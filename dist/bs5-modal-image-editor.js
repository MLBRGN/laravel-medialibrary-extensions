const m=e=>{if(typeof bootstrap>"u"||!bootstrap.Modal){console.warn("Bootstrap Modal is not available.");return}bootstrap.Modal.getInstance(e).hide()};function l(e){const t=e.imageEditorInstance,i=t.getAttribute("data-initiator-id"),d=t.getAttribute("data-medium-display-name"),a=t.getAttribute("data-medium-path"),r=t.getAttribute("data-medium-required-aspect-ratio")??"16:9";t.setImage(d,a,i),t.setConfiguration({debug:!1,rotateDegreesStep:90,freeSelectDisabled:!0,freeRotateDisabled:!0,freeResizeDisabled:!0,filtersDisabled:!0,selectionAspectRatios:[r]})}function n(e){if(e.dataset.imageEditorInitialized)return;const t=e.querySelector("[data-image-editor-placeholder]");e.addEventListener("show.bs.modal",function(){const i=JSON.parse(e.querySelector("[data-image-editor-modal-config]").value);console.log("image editor modal config",i);const d=e.getAttribute("data-medium-path"),a=e.getAttribute("data-medium-display-name"),r=e.getAttribute("data-medium-required-aspect-ratio"),s=i.initiatorId;console.log("requiredAspectRatio",r);const o=document.createElement("image-editor");o.setAttribute("id","my-image-editor"),o.setAttribute("data-medium-display-name",a),o.setAttribute("data-medium-path",d),o.setAttribute("data-initiator-id",s),o.setAttribute("data-aspect-ratio",r),o.addEventListener("imageEditorReady",c=>{l(c.detail)}),t.appendChild(o)}),e.addEventListener("hidden.bs.modal",function(){t.innerHTML=""}),e.dataset.imageEditorInitialized="true"}document.addEventListener("mediaManagerPreviewsUpdated",e=>{e.detail.mediaManager.querySelectorAll("[data-image-editor-modal]").forEach(n)});document.addEventListener("imageEditorModalCloseRequest",e=>{const t=e.detail.modal;m(t)});const u=()=>{new MutationObserver(t=>{var i;for(const d of t)for(const a of d.addedNodes)a instanceof HTMLElement&&(a.matches("[data-image-editor-modal]")&&n(a),(i=a.querySelectorAll)==null||i.call(a,"[data-image-editor-modal]").forEach(n))}).observe(document.body,{childList:!0,subtree:!0})};u();document.querySelectorAll("[data-image-editor-modal]").forEach(n);

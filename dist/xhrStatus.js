let n=new WeakMap;function l(e,s){const{type:o,message:t,message_extra:c=null}=s,a=e.querySelector("[data-status-container]"),i=a==null?void 0:a.querySelector("[data-status-message]");if(!a||!i)return;const d=i.getAttribute("data-base-classes")||"",m=o==="success"?i.getAttribute("data-success-classes")||"":i.getAttribute("data-error-classes")||"";i.className=[d,m].filter(Boolean).join(" "),i.textContent=[t,c].filter(Boolean).join(`

`),a.classList.remove("visible"),a.offsetWidth,a.classList.add("visible"),clearTimeout(n.get(e));const b=setTimeout(()=>u(e),5e3);n.set(e,b)}function u(e){var s;(s=e.querySelector("[data-status-container]"))==null||s.classList.remove("visible")}function f(e){var s;u(e),(s=e.querySelector("[data-spinner-container]"))==null||s.classList.add("active")}function g(e){var s;(s=e.querySelector("[data-spinner-container]"))==null||s.classList.remove("active")}function v(e,s,o){let t=r("upload_failed");switch((e==null?void 0:e.status)||500){case 419:t=r("csrf_token_mismatch");break;case 401:t=r("unauthenticated");break;case 403:t=r("forbidden");break;case 404:t=r("not_found");break;case 422:if(s.errors){const a=Object.values(s.errors).flat();l(o,{type:"error",message:a[0],message_extra:a.slice(1).join(`
`)});return}t=s.message||r("validation_failed");break;case 429:t=r("too_many_requests");break;case 500:case 503:t=r("server_error");break;default:t=s.message||t}l(o,{type:"error",message:t})}function r(e){var s;return((s=window.mediaLibraryTranslations)==null?void 0:s[e])||e}export{f as a,g as b,v as h,l as s,r as t};

let c=new WeakMap;function l(s,t){const{type:r,message:e,message_extra:i=null}=t,a=s.querySelector("[data-status-container]"),o=a==null?void 0:a.querySelector("[data-status-message]");if(!a||!o)return;const u=o.getAttribute("data-base-classes")||"",d=r==="success"?o.getAttribute("data-success-classes")||"":o.getAttribute("data-error-classes")||"";o.className=[u,d].filter(Boolean).join(" "),o.textContent=[e,i].filter(Boolean).join(`

`),a.classList.remove("visible"),a.offsetWidth,a.classList.add("visible"),clearTimeout(c.get(s));const m=setTimeout(()=>void 0,5e3);c.set(s,m)}function f(s,t=null){const r=s.querySelector("[data-spinner-container]");if(r){if(t){let e=r.querySelector(".mle-spinner-text");e.textContent=message}r.classList.add("active")}}function g(s,t,r){let e=n("upload_failed");switch((s==null?void 0:s.status)||500){case 419:e=n("csrf_token_mismatch");break;case 401:e=n("unauthenticated");break;case 403:e=n("forbidden");break;case 404:e=n("not_found");break;case 422:if(t.errors){const a=Object.values(t.errors).flat();l(r,{type:"error",message:a[0],message_extra:a.slice(1).join(`
`)});return}e=t.message||n("validation_failed");break;case 429:e=n("too_many_requests");break;case 500:case 503:e=n("server_error");break;default:e=t.message||e}l(r,{type:"error",message:e})}function n(s){var t;return((t=window.mediaLibraryTranslations)==null?void 0:t[s])||s}export{f as a,g as h,l as s,n as t};

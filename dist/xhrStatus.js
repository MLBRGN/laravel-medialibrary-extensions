let i=new WeakMap;function l(e,s){const{type:o,message:t,message_extra:c=null}=s,a=e.querySelector("[data-status-container]"),r=e==null?void 0:e.querySelector("[data-status-message]");if(!a||!r)return;const d=r.getAttribute("data-base-classes")||"",m=o==="success"?r.getAttribute("data-success-classes")||"":r.getAttribute("data-error-classes")||"";r.className=[d,m].filter(Boolean).join(" "),r.textContent=[t,c].filter(Boolean).join(`

`),a.classList.remove("visible"),a.offsetWidth,a.classList.add("visible");const f=parseInt(a.dataset.statusTimeout,10)||5e3;clearTimeout(i.get(e));const g=setTimeout(()=>u(e),f);i.set(e,g)}function u(e){const s=e.querySelector("[data-status-container]");s==null||s.classList.remove("visible")}function b(e,s=null){console.log("showSpinner",e,s),u(e);const o=e.querySelector("[data-spinner-container]");if(console.log("spinnerContainer",o),!o){console.error("could not find spinner container");return}if(s){let t=o.querySelector(".mle-spinner-text");t.textContent=message}o.classList.add("active")}function p(e){console.log("hideSpinner",e);const s=e.querySelector("[data-spinner-container]");if(!s){console.error("could not find spinner container");return}s==null||s.classList.remove("active")}function v(e,s,o){let t=n("upload_failed");switch((e==null?void 0:e.status)||500){case 419:t=n("csrf_token_mismatch");break;case 401:t=n("unauthenticated");break;case 403:t=n("forbidden");break;case 404:t=n("not_found");break;case 422:if(s.errors){const a=Object.values(s.errors).flat();l(o,{type:"error",message:a[0],message_extra:a.slice(1).join(`
`)});return}t=s.message||n("validation_failed");break;case 429:t=n("too_many_requests");break;case 500:case 503:t=n("server_error");break;default:t=s.message||t}l(o,{type:"error",message:t})}function n(e){var s;return((s=window.mediaLibraryTranslations)==null?void 0:s[e])||e}export{l as a,p as b,v as h,b as s,n as t};

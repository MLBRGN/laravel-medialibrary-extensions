let c=new WeakMap;function u(e,s){const{type:r,message:t,message_extra:o=null}=s,a=e.querySelector("[data-status-container]"),i=a==null?void 0:a.querySelector("[data-status-message]");if(!a||!i)return;const d=i.getAttribute("data-base-classes")||"",m=r==="success"?i.getAttribute("data-success-classes")||"":i.getAttribute("data-error-classes")||"";i.className=[d,m].filter(Boolean).join(" "),i.textContent=[t,o].filter(Boolean).join(`

`),a.classList.remove("visible"),a.offsetWidth,a.classList.add("visible");const f=parseInt(a.dataset.statusTimeout,10)||5e3;clearTimeout(c.get(e));const b=setTimeout(()=>l(e),f);c.set(e,b)}function l(e){var s;(s=e.querySelector("[data-status-container]"))==null||s.classList.remove("visible")}function g(e,s=null){l(e);const r=e.querySelector("[data-spinner-container]");if(r){if(s){let t=r.querySelector(".mle-spinner-text");t.textContent=message}r.classList.add("active")}}function v(e){var s;(s=e.querySelector("[data-spinner-container]"))==null||s.classList.remove("active")}function p(e,s,r){let t=n("upload_failed");switch((e==null?void 0:e.status)||500){case 419:t=n("csrf_token_mismatch");break;case 401:t=n("unauthenticated");break;case 403:t=n("forbidden");break;case 404:t=n("not_found");break;case 422:if(s.errors){const a=Object.values(s.errors).flat();u(r,{type:"error",message:a[0],message_extra:a.slice(1).join(`
`)});return}t=s.message||n("validation_failed");break;case 429:t=n("too_many_requests");break;case 500:case 503:t=n("server_error");break;default:t=s.message||t}u(r,{type:"error",message:t})}function n(e){var s;return((s=window.mediaLibraryTranslations)==null?void 0:s[e])||e}export{g as a,v as b,p as h,u as s,n as t};

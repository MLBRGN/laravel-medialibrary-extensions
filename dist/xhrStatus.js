let i=new WeakMap;function l(e,s){const{type:a,message:t,message_extra:c=null}=s,r=e.querySelector("[data-status-container]"),n=e==null?void 0:e.querySelector("[data-status-message]");if(!r||!n){console.error("could not find status container");return}const d=n.getAttribute("data-base-classes")||"",f=a==="success"?n.getAttribute("data-success-classes")||"":n.getAttribute("data-error-classes")||"";n.className=[d,f].filter(Boolean).join(" "),n.textContent=[t,c].filter(Boolean).join(`

`),r.classList.remove("visible"),r.offsetWidth,r.classList.add("visible");const m=parseInt(r.dataset.statusTimeout,10)||5e3;clearTimeout(i.get(e));const b=setTimeout(()=>u(e),m);i.set(e,b)}function u(e){const s=e.querySelector("[data-status-container]");if(!e){console.error("could not find status container");return}s==null||s.classList.remove("visible")}function g(e,s=null){u(e);const a=e.querySelector("[data-spinner-container]");if(!a){console.error("could not find spinner container");return}if(s){let t=a.querySelector(".mle-spinner-text");t.textContent=message}a.classList.add("active")}function v(e){const s=e.querySelector("[data-spinner-container]");if(!s){console.error("could not find spinner container");return}s==null||s.classList.remove("active")}function p(e,s,a){let t=o("upload_failed");switch((e==null?void 0:e.status)||500){case 419:t=o("csrf_token_mismatch");break;case 401:t=o("unauthenticated");break;case 403:t=o("forbidden");break;case 404:t=o("not_found");break;case 422:if(s.errors){const r=Object.values(s.errors).flat();l(a,{type:"error",message:r[0],message_extra:r.slice(1).join(`
`)});return}t=s.message||o("validation_failed");break;case 429:t=o("too_many_requests");break;case 500:case 503:t=o("server_error");break;default:t=s.message||t}l(a,{type:"error",message:t})}function o(e){var s;return((s=window.mediaLibraryTranslations)==null?void 0:s[e])||e}export{l as a,v as b,p as h,g as s,o as t};

let l=new WeakMap;const c=new WeakMap;function v(e,t=null){clearTimeout(c.get(e));const s=setTimeout(()=>{p(e,t)},300);c.set(e,s)}function h(e){clearTimeout(c.get(e)),y(e)}function u(e,t){const{type:o,message:s,message_extra:i=null}=t,a=e.querySelector("[data-status-container]"),r=e==null?void 0:e.querySelector("[data-status-message]");if(!a||!r){console.error("could not find status container");return}const m=r.getAttribute("data-base-classes")||"",f=o==="success"?r.getAttribute("data-success-classes")||"":r.getAttribute("data-error-classes")||"";r.className=[m,f].filter(Boolean).join(" "),r.textContent=[s,i].filter(Boolean).join(`

`),a.classList.remove("visible"),a.offsetWidth,a.classList.add("visible");const g=parseInt(a.dataset.statusTimeout,10)||5e3;clearTimeout(l.get(e));const b=setTimeout(()=>d(e),g);l.set(e,b)}function d(e){const t=e.querySelector("[data-status-container]");if(!e){console.error("could not find status container");return}t==null||t.classList.remove("visible")}function p(e,t=null){d(e);const o=e.querySelector("[data-spinner-container]");if(!o){console.error("could not find spinner container");return}if(t){let s=o.querySelector(".mle-spinner-text");s.textContent=message}o.classList.add("active")}function y(e){const t=e.querySelector("[data-spinner-container]");if(!t){console.error("could not find spinner container");return}t==null||t.classList.remove("active")}function x(e,t,o){let s=n("upload_failed");switch((e==null?void 0:e.status)||500){case 419:s=n("csrf_token_mismatch");break;case 401:s=n("unauthenticated");break;case 403:s=n("forbidden");break;case 404:s=n("not_found");break;case 422:if(t.errors){const a=Object.values(t.errors).flat();u(o,{type:"error",message:a[0],message_extra:a.slice(1).join(`
`)});return}s=t.message||n("validation_failed");break;case 429:s=n("too_many_requests");break;case 500:case 503:s=n("server_error");break;default:s=t.message||s}u(o,{type:"error",message:s})}function n(e){var t;return((t=window.mediaLibraryTranslations)==null?void 0:t[e])||e}export{h as a,x as h,u as s,n as t,v as x};

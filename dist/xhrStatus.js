let c=new WeakMap;function l(e,s){const{type:r,message:t,message_extra:o=null}=s,a=e.querySelector("[data-status-container]"),i=a==null?void 0:a.querySelector("[data-status-message]");if(!a||!i)return;const d=i.getAttribute("data-base-classes")||"",m=r==="success"?i.getAttribute("data-success-classes")||"":i.getAttribute("data-error-classes")||"";i.className=[d,m].filter(Boolean).join(" "),i.textContent=[t,o].filter(Boolean).join(`

`),a.classList.remove("visible"),a.offsetWidth,a.classList.add("visible"),clearTimeout(c.get(e));const f=setTimeout(()=>u(e),5e3);c.set(e,f)}function u(e){var s;(s=e.querySelector("[data-status-container]"))==null||s.classList.remove("visible")}function b(e,s=null){u(e);const r=e.querySelector("[data-spinner-container]");if(r){if(s){let t=r.querySelector(".mle-spinner-text");t.textContent=message}r.classList.add("active")}}function g(e){var s;(s=e.querySelector("[data-spinner-container]"))==null||s.classList.remove("active")}function v(e,s,r){let t=n("upload_failed");switch((e==null?void 0:e.status)||500){case 419:t=n("csrf_token_mismatch");break;case 401:t=n("unauthenticated");break;case 403:t=n("forbidden");break;case 404:t=n("not_found");break;case 422:if(s.errors){const a=Object.values(s.errors).flat();l(r,{type:"error",message:a[0],message_extra:a.slice(1).join(`
`)});return}t=s.message||n("validation_failed");break;case 429:t=n("too_many_requests");break;case 500:case 503:t=n("server_error");break;default:t=s.message||t}l(r,{type:"error",message:t})}function n(e){var s;return((s=window.mediaLibraryTranslations)==null?void 0:s[e])||e}export{b as a,g as b,v as h,l as s,n as t};

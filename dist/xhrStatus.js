let l=new WeakMap;const i=new WeakMap;function h(e,t=null){if(!e){console.error("xhrRequestStart: No statusAreaContainer provided");return}const r=300;clearTimeout(i.get(e));const s=setTimeout(()=>{v(e,t)},r);i.set(e,s)}function x(e){if(!e){console.error("xhrRequestEnd: No statusAreaContainer provided");return}clearTimeout(i.get(e)),b(e)}function u(e,t){if(!e){console.error("no statusAreaContainer provided");return}const{type:r,message:s,message_extra:a=null}=t,o=e.querySelector("[data-status-container]"),c=e==null?void 0:e.querySelector("[data-status-message]");if(!o||!c){console.error("could not find status container");return}const f=c.getAttribute("data-base-classes")||"",m=r==="success"?c.getAttribute("data-success-classes")||"":c.getAttribute("data-error-classes")||"";c.className=[f,m].filter(Boolean).join(" "),c.textContent=[s,a].filter(Boolean).join(`

`),o.classList.remove("visible"),o.offsetWidth,o.classList.add("visible");const p=parseInt(o.dataset.statusTimeout,10)||5e3;clearTimeout(l.get(e));const g=setTimeout(()=>d(e),p);l.set(e,g)}function d(e){if(!e){console.error("no statusAreaContainer provided");return}const t=e.querySelector("[data-status-container]");if(!e){console.error("could not find status container");return}t==null||t.classList.remove("visible")}function v(e,t=null){if(!e){console.error("no statusAreaContainer provided");return}d(e);const r=e.querySelector("[data-spinner-container]");if(!r){console.error("could not find spinner container");return}if(t){let s=r.querySelector(".mle-spinner-text");s.textContent=message}r.classList.add("active")}function b(e){if(!e){console.error("no statusAreaContainer provided");return}const t=e.querySelector("[data-spinner-container]");if(!t){console.error("could not find spinner container");return}t==null||t.classList.remove("active")}function y(e,t,r){let s=n("upload_failed");switch((e==null?void 0:e.status)||500){case 419:s=n("csrf_token_mismatch");break;case 401:s=n("unauthenticated");break;case 403:s=n("forbidden");break;case 404:s=n("not_found");break;case 422:if(t.errors){const o=Object.values(t.errors).flat();u(r,{type:"error",message:o[0],message_extra:o.slice(1).join(`
`)});return}s=t.message||n("validation_failed");break;case 429:s=n("too_many_requests");break;case 500:case 503:s=n("server_error");break;default:s=t.message||s}u(r,{type:"error",message:s})}function n(e){var t;return((t=window.mediaLibraryTranslations)==null?void 0:t[e])||e}export{x as a,y as h,u as s,n as t,h as x};

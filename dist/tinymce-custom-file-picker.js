window.mleFilePicker=(e,d,c)=>{if(c.filetype==="image"){let i=function(o){if(!o.data||!o.data.mce)return;const n=o.data.content;if(!n){console.warn("No file");return}e(n.url,{alt:n.alt||""}),window.removeEventListener("message",i),r.close()};var s=i;const t=tinymce.activeEditor.getElement(),a={initiator_id:t.getAttribute("data-initiator-id"),model_type:t.getAttribute("data-model-type"),model_id:t.getAttribute("data-model-id"),media_manager_id:"myMediaManager",image_collection:"image-collection",video_collection:"video-collection",audio_collection:"audio-collection"};console.log(a);const l=new URL("/mlbrgn-mle/media-manager-tinymce",window.location.origin);l.search=new URLSearchParams(a).toString();const r=tinymce.activeEditor.windowManager.openUrl({title:"Select images",url:l.toString(),buttons:[{type:"cancel",text:"Close"}]});window.addEventListener("message",i)}};window.addEventListener("message",e=>{console.log("RAW postMessage seen by parent:",e)});

import{r as f,f as u,t as m}from"./helpers.js";let i=!1;const o=new Map;function r(e,t){o.has(e)||o.set(e,new Set),o.get(e).add(t)}function c(e,t){if(o.has(e))for(const a of o.get(e))a(t)}function s(e,t){e.classList.remove("active"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="initial",f(e),u("mleModalClosed",e,{modal:e,originalEvent:t})}function v(e,t,a){const n=document.querySelector(e);n&&(n.classList.add("active"),n.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",m(n),u("mleModalOpened",n,{modal:n,trigger:t,originalEvent:a}))}function h(e,t=()=>{},a=()=>{}){e.addEventListener("mleModalOpened",a),e.addEventListener("mleModalClosed",t)}function g(e){e.stopPropagation();const t=e.target,a=t.closest("[data-mle-modal-trigger]");if(a){e.preventDefault();const l=a.getAttribute("data-mle-modal-trigger");v(l,a,e);return}const n=t.closest("[data-mle-modal-close]");if(n){const l=n.closest("[data-mle-modal]");l&&s(l,e);return}const d=t.closest("[data-mle-modal]");d&&t===d&&s(d,e)}function E(e){e.key==="Escape"&&document.querySelectorAll("[data-mle-modal].active").forEach(s)}function M(){i||(document.addEventListener("click",e=>c("click",e)),document.addEventListener("keydown",e=>c("keydown",e)),i=!0),r("click",g),r("keydown",E)}function k(){o.clear(),M()}export{k as a,s as c,M as i,r,h as s};

let l=new WeakMap;const i=new WeakMap;function h(e,s=null){if(!e){console.error("xhrRequestStart: No statusAreaContainer provided");return}const r=300;clearTimeout(i.get(e));const t=setTimeout(()=>{v(e,s)},r);i.set(e,t)}function x(e){if(!e){console.error("xhrRequestEnd: No statusAreaContainer provided");return}clearTimeout(i.get(e)),b(e)}function u(e,s){if(!e){console.error("no statusAreaContainer provided");return}const{type:r,message:t,message_extra:c=null}=s,o=e.querySelector("[data-mle-status-container]"),a=e?.querySelector("[data-mle-status-message]");if(!o||!a){console.error("could not find status container");return}const m=a.getAttribute("data-mle-base-classes")||"",f=r==="success"?a.getAttribute("data-mle-success-classes")||"":a.getAttribute("data-mle-error-classes")||"";a.className=[m,f].filter(Boolean).join(" "),a.textContent=[t,c].filter(Boolean).join(`

`),o.classList.remove("visible"),o.offsetWidth,o.classList.add("visible");const p=parseInt(o.dataset.mleStatusTimeout,10)||5e3;clearTimeout(l.get(e));const g=setTimeout(()=>d(e),p);l.set(e,g)}function d(e){if(!e){console.error("no statusAreaContainer provided");return}const s=e.querySelector("[data-mle-status-container]");if(!e){console.error("could not find status container");return}s?.classList.remove("visible")}function v(e,s=null){if(!e){console.error("no statusAreaContainer provided");return}d(e);const r=e.querySelector("[data-mle-spinner-container]");if(!r){console.error("could not find spinner container");return}if(s){let t=r.querySelector("[data-mle-spinner-text]");t.textContent=message}r.classList.add("active")}function b(e){if(!e){console.error("no statusAreaContainer provided");return}const s=e.querySelector("[data-mle-spinner-container]");if(!s){console.error("could not find spinner container");return}s?.classList.remove("active")}function y(e,s,r){let t=n("upload_failed");switch(e?.status||500){case 419:t=n("csrf_token_mismatch");break;case 401:t=n("unauthenticated");break;case 403:t=n("forbidden");break;case 404:t=n("not_found");break;case 422:if(s.errors){const o=Object.values(s.errors).flat();u(r,{type:"error",message:o[0],message_extra:o.slice(1).join(`
`)});return}t=s.message||n("validation_failed");break;case 429:t=n("too_many_requests");break;case 500:case 503:t=n("server_error");break;default:t=s.message||t}u(r,{type:"error",message:t})}function n(e){return window.mediaLibraryTranslations?.[e]||e}export{x as a,y as h,u as s,n as t,h as x};

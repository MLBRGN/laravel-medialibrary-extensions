const r=new Set,l=new Set;function s(e,t="module"){if(r.has(e))return;r.add(e);const n=document.createElement("script");n.src=e,n.type=t,document.head.appendChild(n)}function u(e){if(l.has(e))return;l.add(e);const t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}function m(){const e=document.querySelectorAll(".mlbrgn-asset-config");return e.length?Array.from(e).map(t=>{try{return JSON.parse(t.dataset.config)}catch{return console.warn("[mlbrgn] Invalid asset config JSON",t),null}}).filter(Boolean):[]}function c(e){if(!e.length)return null;const t={theme:e[0].theme,translations:{}},n=["includeCss","includeJs","includeCarouselJs","includeTinymceIframeJs","includeImageEditorModalJs","includeMediaModalJs","includeImageEditorJs","includeMediaManagerSubmitter","includeMediaManagerLabSubmitter","includeLiteYoutube"];for(const a of n)t[a]=e.some(o=>o[a]===!0);for(const a of e)a.translations&&Object.assign(t.translations,a.translations);const i=new Set(e.map(a=>a.theme));return i.size>1&&console.warn("[mlbrgn] Multiple frontend themes detected:",Array.from(i)),t}function f(e){const t="/vendor/mlbrgn/media-library-extensions",n=e.theme;window.mediaLibraryTranslations={...window.mediaLibraryTranslations??{},...e.translations},e.includeCss&&u(`${t}/css/app-${n}.css`),e.includeJs&&s(`${t}/js/root/app-${n}.js`),e.includeCarouselJs&&n==="plain"&&s(`${t}/js/plain/media-carousel.js`),e.includeTinymceIframeJs&&s(`${t}/js/shared/tinymce-custom-file-picker-iframe.js`),e.includeImageEditorModalJs&&s(`${t}/js/${n}/modal-image-editor.js`),e.includeMediaModalJs&&s(`${t}/js/${n}/modal-media.js`),e.includeImageEditorJs&&s(`${t}/js/shared/image-editor-listener.js`),e.includeMediaManagerSubmitter&&s(`${t}/js/shared/media-manager-submitter.js`),e.includeMediaManagerLabSubmitter&&s(`${t}/js/shared/media-manager-lab-submitter.js`),e.includeLiteYoutube&&(customElements.get("lite-youtube")||s(`${t}/js/shared/lite-youtube.js`),window.YT||s("https://www.youtube.com/iframe_api","text/javascript"))}const d=m();if(d.length){const e=c(d);e&&f(e)}

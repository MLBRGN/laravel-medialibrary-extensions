import{h as s}from"./xhrStatus.js";import{g as m}from"./media-manager-config.js";async function c(a,i,t,r={}){const e=a.querySelector("[data-media-manager-lab-previews]");if(!e)return;const d=new URLSearchParams({initiator_id:i.id,medium_id:t});try{const n=await fetch(`${i.mediaManagerLabPreviewUpdateRoute}?${d}`,{headers:{Accept:"application/json"}}),o=await n.json();if(!n.ok){s(n,o);return}if(!o.html)return;e.innerHTML=o.html,document.dispatchEvent(new CustomEvent("mediaManagerLabPreviewsUpdated",{bubbles:!1,detail:{mediaManager:a,previewsContainer:e}}))}catch(n){console.error("Error refreshing media manager:",n)}}document.addEventListener("imageUpdated",a=>{console.log("image updated",a);const t=document.getElementById(a.detail.initiatorId).closest("[data-media-manager-lab]"),r=a.detail.mediumId,e=m(t);if(!e){console.warn("Could not get config");return}console.log("mediaManagerLab",t),console.log("mediumId",r),console.log("config",e),c(t,e,r,{})});export{c as u};

import{h as s}from"./xhrStatus.js";import{g as m}from"./media-manager-config.js";async function c(a,i,r,o={}){const e=a.querySelector("[data-media-manager-lab-previews]");if(!e)return;const d=new URLSearchParams({initiator_id:i.id,medium_id:r});try{const t=await fetch(`${i.mediaManagerLabPreviewUpdateRoute}?${d}`,{headers:{Accept:"application/json"}}),n=await t.json();if(!t.ok){s(t,n);return}if(!n.html)return;e.innerHTML=n.html,document.dispatchEvent(new CustomEvent("mediaManagerLabPreviewsUpdated",{bubbles:!1,detail:{mediaManager:a,previewsContainer:e}}))}catch(t){console.error("Error refreshing media manager:",t)}}document.addEventListener("imageUpdated",a=>{const r=document.getElementById(a.detail.initiatorId).closest("[data-media-manager-lab]"),o=a.detail.mediumId,e=m(r);if(!e){console.warn("Could not get config");return}c(r,e,o,{})});export{c as u};

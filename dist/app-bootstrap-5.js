import"./image-editor-listener.js";import"./index.es.js";document.addEventListener("DOMContentLoaded",()=>{const c=document.querySelectorAll(".media-modal"),s={};c.forEach(t=>{const r=t.querySelector(".media-carousel");let l=t.hasAttribute("data-video-autoplay");function n(e){const a=e.getAttribute("data-youtube-video-id"),d=e.querySelector("lite-youtube").shadowRoot.querySelector("iframe");s[a]=new YT.Player(d,{events:{onReady:()=>{l&&u(a)}}})}t.addEventListener("liteYoutubeIframeLoaded",e=>{const a=e.target.closest("[data-youtube-video-id]");a&&n(a)}),t.addEventListener("hidden.bs.modal",()=>{i()}),r.addEventListener("slide.bs.carousel",e=>{if(o(),t.hasAttribute("data-video-autoplay")){const a=e.relatedTarget.querySelector(".media-video-container");if(a&&a.hasAttribute("data-youtube-video-id")){let d=a.getAttribute("data-youtube-video-id");u(d)}}}),t.addEventListener("keydown",e=>{if(!t.classList.contains("show"))return;const a=t.querySelector(".media-carousel");if(!r)return;const d=bootstrap.Carousel.getInstance(a);if(!d)return;const m=r.contains(e.target);console.log(m),!((e.key==="ArrowLeft"||e.key==="ArrowRight")&&m)&&(e.key==="ArrowLeft"?(e.preventDefault(),e.stopPropagation(),d.prev()):e.key==="ArrowRight"&&(e.preventDefault(),e.stopPropagation(),d.next()))})});function i(){Object.values(s).forEach(t=>{t.stopVideo()})}function o(){Object.values(s).forEach(t=>{t.pauseVideo()})}function u(t){let r=s[t];r&&r.playVideo()}});document.addEventListener("DOMContentLoaded",()=>{const c=document.querySelectorAll("[data-image-editor-modal]"),s=function(i){console.log("initializeImageEditor:",i);const o=i.imageEditorInstance,u=o.getAttribute("data-initiator-id"),t=o.getAttribute("data-medium-display-name"),r=o.getAttribute("data-medium-path");o.setImage(t,r,u),o.setConfiguration({debug:!1,rotateDegreesStep:90,freeSelectDisabled:!0,freeRotateDisabled:!0,freeResizeDisabled:!0,filtersDisabled:!0,selectionAspectRatios:["16:9","4:3"],selectionAspectRatio:"16:9"})};c.forEach(i=>{const o=i.querySelector("#image-editor-placeholder");i.addEventListener("show.bs.modal",function(){const u=JSON.parse(i.querySelector(".image-editor-modal-config").value),t=i.getAttribute("data-medium-path"),r=i.getAttribute("data-medium-display-name"),l=u.initiator_id,n=document.createElement("image-editor");n.setAttribute("id","my-image-editor"),n.setAttribute("data-medium-display-name",r),n.setAttribute("data-medium-path",t),n.setAttribute("data-initiator-id",l),n.addEventListener("imageEditorReady",e=>{console.log("Image editor is ready:",e),s(e.detail)}),o.appendChild(n)}),i.addEventListener("hidden.bs.modal",function(){i.querySelector("image-editor"),o.innerHTML=""})})});

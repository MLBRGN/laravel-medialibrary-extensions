import"./image-editor-listener.js";import"./ImageEditor.js";document.addEventListener("DOMContentLoaded",()=>{const s=document.querySelectorAll(".media-modal"),a={};s.forEach(t=>{const r=t.querySelector(".media-carousel");let l=t.hasAttribute("data-video-autoplay");function y(e){const o=e.getAttribute("data-youtube-video-id"),n=e.querySelector("lite-youtube").shadowRoot.querySelector("iframe");a[o]=new YT.Player(n,{events:{onReady:()=>{l&&u(o)}}})}t.addEventListener("liteYoutubeIframeLoaded",e=>{const o=e.target.closest("[data-youtube-video-id]");o&&y(o)}),t.addEventListener("hidden.bs.modal",()=>{i()}),r.addEventListener("slide.bs.carousel",e=>{if(d(),t.hasAttribute("data-video-autoplay")){const o=e.relatedTarget.querySelector(".media-video-container");if(o&&o.hasAttribute("data-youtube-video-id")){let n=o.getAttribute("data-youtube-video-id");u(n)}}}),t.addEventListener("keydown",e=>{if(!t.classList.contains("show"))return;const o=t.querySelector(".media-carousel");if(!r)return;const n=bootstrap.Carousel.getInstance(o);if(!n)return;const c=r.contains(e.target);console.log(c),!((e.key==="ArrowLeft"||e.key==="ArrowRight")&&c)&&(e.key==="ArrowLeft"?(e.preventDefault(),e.stopPropagation(),n.prev()):e.key==="ArrowRight"&&(e.preventDefault(),e.stopPropagation(),n.next()))})});function i(){Object.values(a).forEach(t=>{t.stopVideo()})}function d(){Object.values(a).forEach(t=>{t.pauseVideo()})}function u(t){let r=a[t];r&&r.playVideo()}});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".image-editor-modal").forEach(a=>{a.addEventListener("onImageUpdated",i=>{console.log("onImageUpdated",i),bootstrap.Modal.getInstance(a).hide()})})});

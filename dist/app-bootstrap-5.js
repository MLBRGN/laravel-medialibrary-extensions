import"./image-editor-listener.js";import"./ImageEditor.js";document.addEventListener("DOMContentLoaded",()=>{const u=document.querySelectorAll(".media-modal"),o={};u.forEach(e=>{const i=e.querySelector(".media-carousel");let n=e.hasAttribute("data-video-autoplay");function y(t){const a=t.getAttribute("data-youtube-video-id"),d=t.querySelector("lite-youtube").shadowRoot.querySelector("iframe");o[a]=new YT.Player(d,{events:{onReady:()=>{n&&c(a)}}})}e.addEventListener("liteYoutubeIframeLoaded",t=>{const a=t.target.closest("[data-youtube-video-id]");a&&y(a)}),e.addEventListener("hidden.bs.modal",()=>{r()}),i.addEventListener("slide.bs.carousel",t=>{if(s(),e.hasAttribute("data-video-autoplay")){const a=t.relatedTarget.querySelector(".media-video-container");if(a&&a.hasAttribute("data-youtube-video-id")){let d=a.getAttribute("data-youtube-video-id");c(d)}}}),e.addEventListener("keydown",t=>{if(!e.classList.contains("show"))return;const a=e.querySelector(".media-carousel");if(!i)return;const d=bootstrap.Carousel.getInstance(a);if(!d)return;const l=i.contains(t.target);console.log(l),!((t.key==="ArrowLeft"||t.key==="ArrowRight")&&l)&&(t.key==="ArrowLeft"?(t.preventDefault(),t.stopPropagation(),d.prev()):t.key==="ArrowRight"&&(t.preventDefault(),t.stopPropagation(),d.next()))})});function r(){Object.values(o).forEach(e=>{e.stopVideo()})}function s(){Object.values(o).forEach(e=>{e.pauseVideo()})}function c(e){let i=o[e];i&&i.playVideo()}});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-image-editor-modal]").forEach(o=>{o.addEventListener("show.bs.modal",function(){console.log("Image editor shown");const r=o.querySelector("#image-editor-placeholder"),s=JSON.parse(o.querySelector(".image-editor-modal-config").value);console.log("config",s);const c=o.getAttribute("data-medium-path"),e=o.getAttribute("data-medium-display-name"),i=s.initiator_id,n=document.createElement("image-editor");n.setAttribute("id","imageEditor"),n.setAttribute("data-medium-display-name",e),n.setAttribute("data-medium-path",c),n.setAttribute("data-initiator-id",i),r.appendChild(n)}),o.addEventListener("hidden.bs.modal",function(){console.log("image editor hidden")}),o.addEventListener("imageEditorReady",r=>{console.log("Image editor editor ready!!!!!!")}),o.addEventListener("onImageUpdated",r=>{console.log("onImageUpdated",r),bootstrap.Modal.getInstance(o).hide()})})});

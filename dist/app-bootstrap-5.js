import"./image-editor-listener.js";import"./index.es.js";document.addEventListener("DOMContentLoaded",()=>{const l=document.querySelectorAll(".media-modal"),o={};l.forEach(e=>{const i=e.querySelector(".media-carousel");let d=e.hasAttribute("data-video-autoplay");function u(t){const a=t.getAttribute("data-youtube-video-id"),n=t.querySelector("lite-youtube").shadowRoot.querySelector("iframe");o[a]=new YT.Player(n,{events:{onReady:()=>{d&&c(a)}}})}e.addEventListener("liteYoutubeIframeLoaded",t=>{const a=t.target.closest("[data-youtube-video-id]");a&&u(a)}),e.addEventListener("hidden.bs.modal",()=>{r()}),i.addEventListener("slide.bs.carousel",t=>{if(s(),e.hasAttribute("data-video-autoplay")){const a=t.relatedTarget.querySelector(".media-video-container");if(a&&a.hasAttribute("data-youtube-video-id")){let n=a.getAttribute("data-youtube-video-id");c(n)}}}),e.addEventListener("keydown",t=>{if(!e.classList.contains("show"))return;const a=e.querySelector(".media-carousel");if(!i)return;const n=bootstrap.Carousel.getInstance(a);if(!n)return;const m=i.contains(t.target);console.log(m),!((t.key==="ArrowLeft"||t.key==="ArrowRight")&&m)&&(t.key==="ArrowLeft"?(t.preventDefault(),t.stopPropagation(),n.prev()):t.key==="ArrowRight"&&(t.preventDefault(),t.stopPropagation(),n.next()))})});function r(){Object.values(o).forEach(e=>{e.stopVideo()})}function s(){Object.values(o).forEach(e=>{e.pauseVideo()})}function c(e){let i=o[e];i&&i.playVideo()}});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-image-editor-modal]").forEach(o=>{o.addEventListener("imageEditorReady",r=>{console.log("Image editor editor ready!!!!!!")}),o.addEventListener("show.bs.modal",function(){console.log("Image editor shown");const r=o.querySelector("#image-editor-placeholder"),s=JSON.parse(o.querySelector(".image-editor-modal-config").value);console.log("config",s);const c=o.getAttribute("data-medium-path"),e=o.getAttribute("data-medium-display-name"),i=s.initiator_id,d=document.createElement("image-editor");d.setAttribute("id","imageEditor"),d.setAttribute("data-medium-display-name",e),d.setAttribute("data-medium-path",c),d.setAttribute("data-initiator-id",i),r.appendChild(d),document.addEventListener("imageEditorReady",u=>{console.log("Image editor editor ready!!!!!!")}),d.addEventListener("imageEditorReady",u=>{console.log("Image editor editor ready!!!!!!")})}),o.addEventListener("hidden.bs.modal",function(){console.log("image editor hidden")}),o.addEventListener("onImageUpdated",r=>{console.log("onImageUpdated",r),bootstrap.Modal.getInstance(o).hide()})})});

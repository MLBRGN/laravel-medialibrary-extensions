import{h as s}from"./xhrStatus.js";import{e as l,d as m}from"./form.js";async function c(a,e,d={}){const o=a.querySelector("[data-media-preview-grid]"),i=a.querySelectorAll("[data-form], [data-xhr-form]");if(!o)return;const n=new URLSearchParams({model_type:e.modelType,model_id:e.modelId,single_medium_id:d.singleMediumId??null,temporary_upload_mode:e.temporaryUploadMode,initiator_id:e.id,collections:JSON.stringify(e.collections),options:JSON.stringify(e.options)});try{const t=await fetch(`${e.mediaManagerPreviewUpdateRoute}?${n}`,{headers:{Accept:"application/json"}}),r=await t.json();if(!t.ok){s(t,r);return}if(!r.html)return;o.innerHTML=r.html,!e.multiple&&r.mediaCount!==void 0&&r.mediaCount!==null&&(r.mediaCount<1?l(i):m(i)),document.dispatchEvent(new CustomEvent("mediaManagerPreviewsUpdated",{bubbles:!1,detail:{mediaManager:a,previewGrid:o}}))}catch(t){console.error("Error refreshing media manager:",t)}}export{c as u};

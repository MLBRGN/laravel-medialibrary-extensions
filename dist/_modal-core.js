import{r as f,f as u,t as m}from"./_helpers.js";let i=!1;const n=new Map;function r(e,t){n.has(e)||n.set(e,new Set),n.get(e).add(t)}function c(e,t){if(n.has(e))for(const o of n.get(e))o(t)}function d(e,t){e.classList.remove("active"),e.classList.remove("mle-active"),e.setAttribute("aria-hidden","true"),document.body.style.overflow="initial",f(e),u("mleModalClosed",e,{modal:e,originalEvent:t})}function v(e,t,o){const a=document.querySelector(e);a&&(a.classList.add("active"),a.classList.add("mle-active"),a.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",m(a),u("mleModalOpened",a,{modal:a,trigger:t,originalEvent:o}))}function h(e,t=()=>{},o=()=>{}){e.addEventListener("mleModalOpened",o),e.addEventListener("mleModalClosed",t)}function g(e){e.stopPropagation();const t=e.target,o=t.closest("[data-mle-modal-trigger]");if(o){e.preventDefault();const l=o.getAttribute("data-mle-modal-trigger");v(l,o,e);return}const a=t.closest("[data-mle-modal-close]");if(a){const l=a.closest("[data-mle-modal]");l&&d(l,e);return}const s=t.closest("[data-mle-modal]");s&&t===s&&d(s,e)}function E(e){e.key==="Escape"&&(document.querySelectorAll("[data-mle-modal].active").forEach(d),document.querySelectorAll("[data-mle-modal].mle-active").forEach(d))}function M(){i||(document.addEventListener("click",e=>c("click",e)),document.addEventListener("keydown",e=>c("keydown",e)),i=!0),r("click",g),r("keydown",E)}function y(){n.clear(),M()}export{y as a,d as c,M as i,r,h as s};
